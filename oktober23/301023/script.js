const dropdownMenu = document.querySelector(".dropdown-menu");
const objectTypes = document.querySelectorAll(".dropdown-menu > *:not(button)");

// when nothing in the list display message
function checkEmpty() {
  if (objectTypes.length === 0) {
    const svg = document.createElement("div");
    // i know this is a mess
    svg.innerHTML = `<?xml version="1.0" ?>
    
    <!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>
    
    
    <svg  viewBox="0 0 32 32" enable-background="new 0 0 32 32" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
    
    
    <g>
    
    <path d="M14,22c-1.5957,0-3.1025-0.6211-4.2432-1.749C8.6211,19.1025,8,17.5957,8,16s0.6211-3.1025,1.749-4.2432    C10.8975,10.6211,12.4043,10,14,10c1.75,0,3.4111,0.7646,4.5576,2.0981C19.4873,13.1763,20,14.5625,20,16    s-0.5127,2.8237-1.4424,3.9028C17.4111,21.2354,15.75,22,14,22z M14,12c-1.0654,0-2.0732,0.416-2.8369,1.1709    C10.416,13.9268,10,14.9346,10,16s0.416,2.0732,1.1709,2.8369C11.9268,19.584,12.9346,20,14,20    c1.167,0,2.2754-0.5112,3.042-1.4019C17.6602,17.8809,18,16.9585,18,16s-0.3398-1.8809-0.958-2.5972    C16.2754,12.5112,15.167,12,14,12z" fill="black" stroke="#52b393" stroke-width="0.8"/>
    <path d="M14,12c-1.0654,0-2.0732,0.416-2.8369,1.1709    C10.416,13.9268,10,14.9346,10,16s0.416,2.0732,1.1709,2.8369C11.9268,19.584,12.9346,20,14,20    c1.167,0,2.2754-0.5112,3.042-1.4019C17.6602,17.8809,18,16.9585,18,16s-0.3398-1.8809-0.958-2.5972    C16.2754,12.5112,15.167,12,14,12z" fill="white" stroke="white" stroke-width="0.8"/>
    
    </g>
    <g>
    
    <path d="M17.7998,13.75c-0.2813,0-0.5615-0.1187-0.7588-0.3491c-0.3599-0.4194-0.3115-1.0508,0.1084-1.4102    l8.6904-7.4502c0.4189-0.3579,1.0508-0.3101,1.4092,0.1084c0.3604,0.4194,0.3115,1.0508-0.1084,1.4102l-8.6904,7.4502    C18.2617,13.6709,18.0303,13.75,17.7998,13.75z" fill="#black"/>
    
    </g>
    
    <g>
    
    <path d="M26.4902,27.7002c-0.2305,0-0.4619-0.0791-0.6504-0.2407l-8.6904-7.4502    c-0.4199-0.3594-0.4683-0.9907-0.1084-1.4102c0.3594-0.4194,0.9912-0.4668,1.4092-0.1084l8.6904,7.4502    c0.4199,0.3594,0.4688,0.9907,0.1084,1.4102C27.0518,27.5815,26.7715,27.7002,26.4902,27.7002z" fill="#black"/>
    
    </g>
    
    <g>
    
    <path d="M7.1201,23.8799c-0.2559,0-0.5117-0.0977-0.707-0.293c-0.3906-0.3906-0.3906-1.0234,0-1.4141    l3.3398-3.3398c0.3906-0.3906,1.0234-0.3906,1.4141,0s0.3906,1.0234,0,1.4141l-3.3398,3.3398    C7.6318,23.7822,7.376,23.8799,7.1201,23.8799z" fill="black"/>
    
    </g>
    
    <g>
    
    <path d="M10.46,13.46c-0.2559,0-0.5117-0.0977-0.707-0.293L6.4131,9.8271c-0.3906-0.3906-0.3906-1.0234,0-1.4141    s1.0234-0.3906,1.4141,0l3.3398,3.3398c0.3906,0.3906,0.3906,1.0234,0,1.4141C10.9717,13.3623,10.7158,13.46,10.46,13.46z" fill="black"/>
    
    </g>
    
    <g>
    
    <path d="M24,17h-5c-0.5527,0-1-0.4478-1-1s0.4473-1,1-1h5c0.5527,0,1,0.4478,1,1S24.5527,17,24,17z" fill="#black" />
    
    </g>
    <g>
    <path d="M14,12c-1.0654,0-2.0732,0.416-2.8369,1.1709    C10.416,13.9268,10,14.9346,10,16s0.416,2.0732,1.1709,2.8369C11.9268,19.584,12.9346,20,14,20    c1.167,0,2.2754-0.5112,3.042-1.4019C17.6602,17.8809,18,16.9585,18,16s-0.3398-1.8809-0.958-2.5972    C16.2754,12.5112,15.167,12,14,12z" fill="white" stroke="lightgray" stroke-width="0.8"/>
    </g>
    
    <g>
    
    <path d="M5,11c-2.2056,0-4-1.7944-4-4s1.7944-4,4-4s4,1.7944,4,4S7.2056,11,5,11z M5,5C3.897,5,3,5.897,3,7    s0.897,2,2,2s2-0.897,2-2S6.103,5,5,5z" fill="#efb875" stroke="black" stroke-width="0.5"/>
    <path d="M5,5C3.897,5,3,5.897,3,7    s0.897,2,2,2s2-0.897,2-2S6.103,5,5,5z" fill="transparent" stroke="white" stroke-width="0.8"/>
    
    </g>
    
    <g>
    
    <path d="M28,7c-1.6543,0-3-1.3457-3-3s1.3457-3,3-3s3,1.3457,3,3S29.6543,7,28,7z M28,3c-0.5518,0-1,0.4487-1,1    s0.4482,1,1,1s1-0.4487,1-1S28.5518,3,28,3z" fill="#3796c9" stroke="black" stroke-width="0.5"/>
    <path d="M28,3c-0.5518,0-1,0.4487-1,1    s0.4482,1,1,1s1-0.4487,1-1S28.5518,3,28,3z" fill="transparent" stroke="white" stroke-width="0.8"/>
    
    
    </g>
    
    <g>
    <path d="M26,19c-1.6543,0-3-1.3457-3-3s1.3457-3,3-3s3,1.3457,3,3S27.6543,19,26,19z M26,15    c-0.5518,0-1,0.4487-1,1s0.4482,1,1,1s1-0.4487,1-1S26.5518,15,26,15z" fill="#F5D803" stroke="black" stroke-width="0.5"/>
    <path d="M26,15    c-0.5518,0-1,0.4487-1,1s0.4482,1,1,1s1-0.4487,1-1S26.5518,15,26,15z" fill="transparent" stroke="white" stroke-width="0.8"/>
    </g>
    
    <g>
    <path d="M28,31c-1.6543,0-3-1.3457-3-3s1.3457-3,3-3s3,1.3457,3,3S29.6543,31,28,31z M28,27    c-0.5518,0-1,0.4487-1,1s0.4482,1,1,1s1-0.4487,1-1S28.5518,27,28,27z" fill="#3796c9" stroke="black" stroke-width="0.5"/>
    <path d="M28,27    c-0.5518,0-1,0.4487-1,1s0.4482,1,1,1s1-0.4487,1-1S28.5518,27,28,27z" fill="transparent" stroke="white" stroke-width="0.8"/>
    </g>
    
    
    <g>
    <path d="M5,29c-2.2056,0-4-1.7944-4-4s1.7944-4,4-4s4,1.7944,4,4S7.2056,29,5,29z M5,23c-1.103,0-2,0.897-2,2    s0.897,2,2,2s2-0.897,2-2S6.103,23,5,23z" fill="#ea604b" stroke="black" stroke-width="0.5"/>
    <path d="M5,23c-1.103,0-2,0.897-2,2    s0.897,2,2,2s2-0.897,2-2S6.103,23,5,23z " fill="transparent" stroke="white" stroke-width="0.8"/>
    </g>
    
    </svg>`;

    const header = document.createElement("h4");
    header.textContent = "No Object types in here yet";
    const p = document.createElement("p");
    p.textContent = "the object types  that you'll create will appear here";
    dropdownMenu.prepend(svg, header, p);
    dropdownMenu.classList.add("listEmpty");
  }
}

checkEmpty();

document.addEventListener("click", (e) => {
  // dropdown active class logic
  const isDropdown =
    e.target.matches(".dropdown > button") ||
    e.target.matches(".dropdown > label") ||
    e.target.matches(".dropdown > button svg");

  if (!isDropdown && e.target.closest(".dropdown") != null) {
    if (e.target.matches("button.demo-list")) {
      //   for demo purpose when empty list append some test tasks
      const dropdownMenu = e.target.closest(".dropdown-menu");
      dropdownMenu.innerHTML = `  
      <div class="entry">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z "
          fill="#efac4b"
        />
      </svg>
      Person
    </div>
    <div class="entry">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"
          fill="#439f81"
        />
      </svg>
      Book
    </div>
    <div class="entry">
      <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
      <svg
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        aria-hidden="true"
        role="img"
        class="iconify iconify--fxemoji"
        preserveAspectRatio="xMidYMid meet"
      >
        <path
          fill="#4997f7"
          d="M472 362.5c-6.9-25.8-29.8-48.2-65-58.1c-26.4-7.4-74.2-17.3-118.6-5.5c-26.9 7.1-54.7 23.9-78.1 39.4V335c0-5.7.2-24.7.9-36.4c.4-12.5.8-25.3 1.6-38c.5-12.9 1.5-25.6 2.6-38.2c.8-12.8 2.9-24.6 4.4-36.5c1.9-10.9 5.4-21.5 9.2-31.3c12.8 8.1 30.9 14 53.8 14c30.6 0 45.1-9.4 51.2-16.3c3-3.4 8.2-9.8 3.8-21.9c-4.2-11.3-10.2-9.3-10.2-13.6c0-5.7 2.2-5.5 11-10c20-10.1 17.9-27.4 17.8-43.7c.1-1.2.1-2.3.1-3.5c0-32.8-31.9-59.4-71.1-59.4c-.8 0-1.6 0-2.4.1l-.2-.3c-32.8 0-53.6 9.7-66.1 24.2c-.6.4-1.1.8-1.7 1.3c-1.6 1.6-3.3 3.2-5.1 5c-6.7 6.8-16.8 17.7-20.8 24.6c-5.8 8-11.8 16.9-17.4 26.2c-6.4 9.4-11.8 19.5-18.5 30c-6.6 10.5-12.3 21.9-19.2 33.4c-12.5 23.3-26.7 48-38.9 73.7C83 244.1 71.2 270.3 62.2 296c-4.5 12.9-8.4 25.6-11.7 37.9c-3.1 12.6-6.5 24.1-7.9 35.9c-.2 1.5-.4 3-.5 4.5c-7.8 49.9-8.6 106.5-1.7 115.2c7.9 10.1 29.3 13.1 49.5 11.7c13.8-.9 77.9 10.5 140.5 10.5c3.6.1 7.2.2 10.9.2c47.9.2 100.9-3.3 132.2-17.2c91.6-40.5 113.2-77 98.5-132.2z"
        ></path>
        <path
          fill="#3268aa"
          d="M302.4 434.1c-2.1 0-4.2-.1-6.4-.2c-27.9-1.7-53.4-14.1-71.9-35c-3.4-3.8-3.1-9.7.8-13.1c3.8-3.4 9.7-3.1 13.1.8c15.2 17.2 36.2 27.4 59.1 28.7c22.9 1.4 45-6.3 62.1-21.5c3.8-3.4 9.7-3.1 13.1.8c3.4 3.8 3.1 9.7-.8 13.1c-19.2 17.1-43.5 26.4-69.1 26.4z"
        ></path>
      </svg>
      Exercise
    </div>
    <div class="entry">
      <?xml version="1.0" encoding="iso-8859-1"?>
      <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
      <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
      <svg
        fill="#6e9d4f"
        version="1.1"
        id="Capa_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 32 32"
        xml:space="preserve"
      >
        <g>
          <g id="money_4">
            <g>
              <path
                d="M32,22.327c0-1.705-1.387-3.093-3.092-3.093c-0.637,0-1.227,0.199-1.717,0.528h-0.002c0,0.003-0.002,0.003-0.002,0.005
        c-0.207,0.142-0.398,0.301-0.566,0.485l0.008,0.008c-0.641,0.576-1.666,1.543-2.41,2.423c-0.16-0.412-0.404-0.787-0.717-1.093
        c-3.053-2.688-6.723-3.78-10.93-3.78c-1.377,0-2.705,0.149-3.961,0.424c-0.037-0.457-0.063-0.735-0.063-0.735H0.359
        c0,0-0.359,2.998-0.359,6.694c0,3.697,0.359,6.694,0.359,6.694h8.189c0,0,0.072-0.78,0.15-1.893
        c1.219-0.205,2.465,0.116,3.908,1.012c1.828,1.195,4.08,1.902,6.518,1.902c2.472,0,4.594-0.729,6.36-1.955l0.002,0.002
        c0.019-0.015,0.041-0.031,0.068-0.052c0.5-0.353,0.973-0.741,1.413-1.168c0.347-0.354,0.814-0.807,1.519-1.495
        c2.361-2.32,2.652-2.781,2.652-2.781s-0.007,0.002-0.009,0.002C31.668,23.909,32,23.159,32,22.327z M30.121,23.54
        c-0.414,0.41-2.166,2.215-2.639,2.678c-1.229,1.207-1.801,1.771-2.072,2.084l-0.004-0.006c-0.188,0.168-0.385,0.322-0.586,0.47
        c-1.584,1.071-3.557,1.711-5.695,1.711c-2.158,0-4.146-0.647-5.736-1.735h-0.012c-1.375-0.841-2.988-1.354-4.584-1.197
        c0.063-1.103,0.115-2.312,0.115-3.349c0-1.44-0.1-3.211-0.193-4.567c1.215-0.274,2.512-0.428,3.857-0.428
        c4.12,0,7.762,1.362,9.995,3.495c0.263,0.293,0.429,0.679,0.429,1.101c0,0.916-0.744,1.658-1.658,1.658
        c-0.035,0-0.067-0.009-0.103-0.011l-0.004,0.021c-0.854-0.03-2.188-0.389-4.442-1.25l-0.513,1.34
        c2.384,0.91,3.953,1.318,5.066,1.347v-0.01c1.395-0.005,2.572-0.933,2.955-2.201v0.002c0.482-0.801,2.287-2.472,3.312-3.383
        l0.002,0.002c0.011-0.011,0.021-0.019,0.027-0.026c0.19-0.171,0.354-0.313,0.473-0.416c0.216-0.136,0.44-0.193,0.798-0.193
        c0.914,0,1.655,0.744,1.655,1.656C30.564,22.786,30.363,23.219,30.121,23.54z"
              />
              <path
                d="M21.973,18.611c5.105,0,9.26-4.153,9.26-9.259s-4.152-9.26-9.26-9.26c-5.106,0-9.26,4.154-9.26,9.26
        S16.865,18.611,21.973,18.611z M21.973,1.706c4.215,0,7.646,3.432,7.646,7.646c0,4.214-3.432,7.646-7.646,7.646
        c-4.217,0-7.646-3.432-7.646-7.646C14.327,5.137,17.756,1.706,21.973,1.706z"
              />
              <path
                d="M19.545,9.04c0.197,0.23,0.48,0.441,0.848,0.637c0.365,0.193,0.855,0.338,1.467,0.43
        c0.174,0.029,0.348,0.066,0.521,0.115c0.178,0.045,0.338,0.109,0.486,0.188c0.146,0.08,0.268,0.176,0.361,0.287
        c0.094,0.109,0.141,0.242,0.141,0.393c0,0.18-0.09,0.324-0.27,0.438c-0.184,0.111-0.406,0.166-0.682,0.166
        c-0.209,0-0.396-0.016-0.559-0.049c-0.158-0.031-0.309-0.082-0.439-0.15c-0.132-0.068-0.262-0.154-0.389-0.26
        c-0.125-0.104-0.254-0.227-0.385-0.371h-1.51v2.266h1.51v-0.338c0.072,0.037,0.146,0.072,0.225,0.104
        c0.072,0.033,0.15,0.066,0.229,0.102v0.885h1.51v-0.681c0.324-0.021,0.625-0.09,0.9-0.205c0.277-0.113,0.518-0.266,0.719-0.453
        c0.201-0.186,0.359-0.404,0.475-0.652s0.174-0.516,0.174-0.803c0-0.15-0.025-0.346-0.082-0.588
        c-0.053-0.24-0.178-0.486-0.371-0.734c-0.191-0.248-0.477-0.477-0.846-0.689c-0.371-0.213-0.869-0.365-1.494-0.459
        c-1.008-0.15-1.51-0.459-1.51-0.926c0-0.166,0.078-0.32,0.24-0.465c0.162-0.143,0.396-0.215,0.695-0.215
        c0.209,0,0.391,0.018,0.545,0.053c0.154,0.037,0.297,0.09,0.426,0.156c0.129,0.068,0.252,0.154,0.367,0.26
        c0.115,0.104,0.232,0.225,0.355,0.361h1.52V5.577h-1.508V5.9c-0.18-0.109-0.383-0.195-0.605-0.26V4.82H21.1v0.713
        c-0.295,0.043-0.564,0.129-0.812,0.254s-0.463,0.283-0.646,0.475c-0.185,0.189-0.326,0.408-0.427,0.652
        c-0.103,0.244-0.151,0.502-0.151,0.777c0,0.186,0.031,0.4,0.092,0.641C19.219,8.572,19.348,8.81,19.545,9.04z"
              />
            </g>
          </g>
        </g>
      </svg>
      Income
    </div>
    <div class="entry">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="#eb5922"
      >
        <path
          d="M11 8C11 10.21 9.21 12 7 12C4.79 12 3 10.21 3 8C3 5.79 4.79 4 7 4C9.21 4 11 5.79 11 8M11 14.72V20H0V18C0 15.79 3.13 14 7 14C8.5 14 9.87 14.27 11 14.72M24 20H13V3H24V20M16 11.5C16 10.12 17.12 9 18.5 9C19.88 9 21 10.12 21 11.5C21 12.88 19.88 14 18.5 14C17.12 14 16 12.88 16 11.5M22 7C20.9 7 20 6.11 20 5H17C17 6.11 16.11 7 15 7V16C16.11 16 17 16.9 17 18H20C20 16.9 20.9 16 22 16V7Z"
        />
      </svg>
      Expense
    </div>
      <button class="empty-list"><span>-</span> Delete all</button>
      `;
      dropdownMenu.classList.remove("listEmpty");
      return;
    }
    if (e.target.matches("button.empty-list")) {
      //   for demo purpose empty list
      const dropdownMenu = e.target.closest(".dropdown-menu");
      dropdownMenu.innerHTML = `  
      <button class="demo-list">
      <span>+</span> Create some demo Task
    </button>  `;
      dropdownMenu.classList.remove("listEmpty");
      checkEmpty();
      return;
    }
  }
  let currentDropdown;
  if (isDropdown) {
    currentDropdown = e.target.closest(".dropdown");
    currentDropdown.classList.toggle("active");
  }
  document.querySelectorAll(".dropdown").forEach((dropdown) => {
    if (dropdown !== currentDropdown) {
      dropdown.classList.remove("active");
    }
  });
});
